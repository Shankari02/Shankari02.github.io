<!doctype html><html data-enable-theme-switch="true" data-use-system-theme="false" data-default-theme="light" data-current="post" lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>My First Patch Upstreamed to the Linux Kernel (Rust Subsystem)</title><meta name="description" content="Get to know me through my personal blogs!"><link rel="dns-prefetch" href="https://identity.netlify.com"><script async src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="/assets/css/main.css"><script>// Initialize theme
    // Must run before page rendering to prevent flash
    const themeConfig = document.documentElement.dataset;
    const theme = localStorage.getItem('theme');

    if (theme) {
      themeConfig.theme = theme;
    } else {
      const defaultTheme = themeConfig.defaultTheme;
      const useSystemTheme = themeConfig.useSystemTheme === 'true';
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

      themeConfig.theme = (useSystemTheme && prefersDark) ? 'dark' : defaultTheme;
    }</script><script defer="defer" src="/assets/js/main.bundle.js"></script></head><body><div class="wrapper-bg-wrapper"><div class="wrapper-bg"></div></div><header class="site-header"><div class="site-header__container"><span class="site-header__logo-container"><a class="site-header__logo" href="/" aria-label="Logo"> <?xml version="1.0" encoding="iso-8859-1"?> <!doctype html> <svg fill="#000000" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="800px" height="800px" viewBox="0 0 495.398 495.398" xml:space="preserve"><g><g><g><path d="M487.083,225.514l-75.08-75.08V63.704c0-15.682-12.708-28.391-28.413-28.391c-15.669,0-28.377,12.709-28.377,28.391
				v29.941L299.31,37.74c-27.639-27.624-75.694-27.575-103.27,0.05L8.312,225.514c-11.082,11.104-11.082,29.071,0,40.158
				c11.087,11.101,29.089,11.101,40.172,0l187.71-187.729c6.115-6.083,16.893-6.083,22.976-0.018l187.742,187.747
				c5.567,5.551,12.825,8.312,20.081,8.312c7.271,0,14.541-2.764,20.091-8.312C498.17,254.586,498.17,236.619,487.083,225.514z"/><path d="M257.561,131.836c-5.454-5.451-14.285-5.451-19.723,0L72.712,296.913c-2.607,2.606-4.085,6.164-4.085,9.877v120.401
				c0,28.253,22.908,51.16,51.16,51.16h81.754v-126.61h92.299v126.61h81.755c28.251,0,51.159-22.907,51.159-51.159V306.79
				c0-3.713-1.465-7.271-4.085-9.877L257.561,131.836z"/></g></g></g></svg> </a></span><button class="site-header__mobile-nav" data-drawer-trigger="" aria-controls="drawer-name" aria-expanded="false"><span class="site-header__mobile-nav-label">Menu</span> <svg width="226" height="187" viewBox="0 0 226 187" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 0H225.311V22.8494H0V0Z" fill="currentColor"/><path d="M0 81.872H225.311V104.721H0V81.872Z" fill="currentColor"/><path d="M0 163.744H225.311V186.593H0V163.744Z" fill="currentColor"/></svg></button><nav class="site-header__nav"><ul class="site-header__items"><li class="site-header__item"><a class="site-header__link" href="/about/">About</a></li><li class="site-header__item"><a class="site-header__link" href="/blog/">Blog</a></li><li class="site-header__item"><a class="site-header__link" href="/projects/">Projects</a></li><li class="site-header__item"><button class="site-header__link site-header__link--theme-switch" data-theme-switch><svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 14C7.01472 14 5 11.9853 5 9.5C5 7.01472 7.01472 5 9.5 5C11.9853 5 14 7.01472 14 9.5C14 11.9853 11.9853 14 9.5 14ZM9.5 13C11.433 13 13 11.433 13 9.5C13 7.567 11.433 6 9.5 6C7.567 6 6 7.567 6 9.5C6 11.433 7.567 13 9.5 13ZM10 3H9V0H10V3ZM14.4497 5.25736L13.7426 4.55025L15.864 2.42893L16.5711 3.13604L14.4497 5.25736ZM16 10V9H19V10H16ZM13.7426 14.4497L14.4497 13.7426L16.5711 15.864L15.864 16.5711L13.7426 14.4497ZM9 16H10V19H9V16ZM4.55025 13.7426L5.25736 14.4497L3.13604 16.5711L2.42893 15.864L4.55025 13.7426ZM3 9V10H0V9H3ZM5.25736 4.55025L4.55025 5.25736L2.42893 3.13604L3.13604 2.42893L5.25736 4.55025Z" fill="currentColor"/></svg></button></li></ul></nav></div></header><section class="drawer" id="drawer-name" data-drawer-target><div class="drawer__overlay" data-drawer-close tabindex="-1"></div><div class="drawer__wrapper"><div class="drawer__header"><button class="drawer__close" data-drawer-close aria-label="Close Drawer"><svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 3.84294L3.84294 0L22.4996 18.7131L41.2127 0L45 3.84294L26.3425 22.4996L45 41.2127L41.2127 45L22.4996 26.3425L3.84294 45L0 41.2127L18.7131 22.4996L0 3.84294Z" fill="currentColor"/></svg></button></div><div class="drawer__content"><ul class="drawer__nav"><li class="drawer__nav-item"><a href="/">Home</a></li><li class="drawer__nav-item"><a href="/about/">About</a></li><li class="drawer__nav-item"><a href="/blog/">Blog</a></li><li class="drawer__nav-item"><a href="/projects/">Projects</a></li></ul></div></div></section><main><div class="page-container"><article><h1>My First Patch Upstreamed to the Linux Kernel (Rust Subsystem)</h1><p><time datetime="2025-07-01">1 July 2025</time></p><hr><p><strong>1st July 2025</strong> was a special day for me, I had my first patch accepted <strong>upstream in the Linux kernel</strong>! It was a contribution to the Rust abstraction for <code>miscdevice</code>, and the experience taught me a lot about contributing to large, community-driven projects like the kernel.</p><p>Though this wasn't the first patch I submitted to the mailing list, but yes, it was the first to be accepted!</p><hr><h4 id="why-rust%3F-why-the-kernel%3F" tabindex="-1"><a class="header-anchor" href="#why-rust%3F-why-the-kernel%3F">#</a> Why Rust? Why the Kernel?</h4><p>I’ve always been interested in both <strong>low-level systems programming</strong> and <strong>Rust</strong>. So when I found out that the <strong>Linux kernel was gaining Rust support</strong>, I was instantly curious. The <code>rust-for-linux</code> initiative is gradually introducing safe abstractions for kernel development in Rust.</p><p>But of course, contributing to the Linux kernel can be intimidating. So I decided to start with a “<strong>good first issue</strong>”.</p><hr><h4 id="the-patch" tabindex="-1"><a class="header-anchor" href="#the-patch">#</a> The Patch</h4><p>The patch I submitted clarified the <strong>invariant documentation</strong> for the <code>MiscDeviceRegistration</code> struct, which is part of the Rust interface to kernel <code>miscdevice</code>s.</p><p>Here’s a link to the issue I worked on:<br><a href="https://github.com/Rust-for-Linux/linux/issues/1168">Issue #1168</a></p><hr><h4 id="before-and-after" tabindex="-1"><a class="header-anchor" href="#before-and-after">#</a> Before and After</h4><p>Initially, the documentation simply said:</p><pre class="language-c"><code class="language-c"><span class="token comment">/// # Invariants</span><br><span class="token comment">///</span><br><span class="token comment">/// `inner` is a registered misc device.</span></code></pre><p>This felt vague. The improved version broke the invariant down more explicitly:</p><pre class="language-c"><code class="language-c"><span class="token comment">/// # Invariants</span><br><span class="token comment">///</span><br><span class="token comment">/// - `inner` contains a `struct miscdevice` that is registered using</span><br><span class="token comment">///   `misc_register()`.</span><br><span class="token comment">/// - This registration remains valid for the entire lifetime of the</span><br><span class="token comment">///   [`MiscDeviceRegistration`] instance.</span><br><span class="token comment">/// - Deregistration occurs exactly once in [`Drop`] via `misc_deregister()`.</span><br><span class="token comment">/// - `inner` wraps a valid, pinned `miscdevice` created using</span><br><span class="token comment">///   [`MiscDeviceOptions::into_raw`].</span></code></pre><p>A look to the Patch on the Mailing list: <a href="https://lore.kernel.org/all/20250626104520.563036-1-shankari.ak0208@gmail.com/">rust: miscdevice: clarify invariant for <code>MiscDeviceRegistration</code></a><br>This change makes the contract much more precise and helpful for anyone reading or maintaining the code.</p><hr><h4 id="the-review-process" tabindex="-1"><a class="header-anchor" href="#the-review-process">#</a> The Review Process</h4><p>The patch went through two iterations. In my first version:<br>I hadn't formatted the list as bullets, which reduced clarity and one of the points was slightly incorrect.</p><p>Thanks to a helpful review from Benno Lossin, I quickly fixed both in the second version. After that, it was accepted and merged into linux-next!</p><p>Here’s the patch commit: <a href="https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/commit/?id=b9ff1c2a26fa31216be18e9b14c419ff8fe39e72">b9ff1c2a26fa</a></p><hr><h4 id="what-i-learned" tabindex="-1"><a class="header-anchor" href="#what-i-learned">#</a> What I Learned</h4><p>This patch was a small one, but it taught me much more:</p><ul><li>How the kernel's Rust code is organized and documented.</li><li>How the patch acceptance process works.</li></ul><p>That contributing doesn't always mean writing big features. Even small doc fixes help improve the overall quality.</p><p>I also want to highlight just how clean and well-structured the Rust part of the kernel is. The codebase is extremely well-documented, making it easy for newcomers to understand. This patch was also an attempt to preserve and improve that clarity.</p><hr><h4 id="what%E2%80%99s-next%3F" tabindex="-1"><a class="header-anchor" href="#what%E2%80%99s-next%3F">#</a> What’s Next?</h4><p>I'm excited to continue contributing to the kernel and deepen my understanding of systems programming and Rust. If you're someone who's been considering contributing but unsure where to start, go look at the <a href="https://github.com/Rust-for-Linux/linux/issues?q=state%3Aopen%20label%3A%22good%20first%20issue%22">“good first issues”</a> in the Rust for Linux GitHub or on the mailing list. There's room for everyone!</p><p>Signed-off-by: Me 😄</p><p class="tag-list"><a class="tag" href="/tags/lfx/" rel="tag">lfx</a> <a class="tag" href="/tags/rust-for-linux/" rel="tag">rust-for-linux</a></p></article><nav><a href="/blog/">← View All Articles</a></nav></div></main><footer class="site-footer"><small><a href="https://github.com/Shankari02" target="_blank" aria-label="GitHub"><img src="/assets/img/github.svg" alt="GitHub"> </a><a href="https://linkedin.com/in/shankari-anand" target="_blank" aria-label="LinkedIn"><img src="/assets/img/linkedin.svg" alt="LinkedIn"> </a><a href="mailto:shankari.anand618@gmail.com" target="_blank" aria-label="Twitter"><img src="/assets/img/mail.svg" alt="Email"></a></small></footer></body></html>